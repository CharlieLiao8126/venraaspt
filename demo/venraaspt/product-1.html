<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--load jquery-->	
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js">
    </script>
    <!-- Bootstrap -->
    <!-- 最新編譯和最佳化的 CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" type="text/css">
	
	<!-- 選擇性佈景主題-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
		
	<!-- 最新編譯和最佳化的 JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	
	<!--全景設計-->
	<style type="text/css">
        body {
            padding-top: 40px;
            padding-bottom: 40px;
			background-color: rgb(255, 248, 122);
		}
        .sidebar-nav {
            padding: 5px 0;
        }
		.input-group{
			padding: 5px 0;
		}
		h2 {display:inline};
    </style>
    <script> 
		// Demo 頁使用控制元件, 不須參考
		var venraas_script2 = document.createElement('script');
		venraas_script2.type = 'text/javascript';
		venraas_script2.src = 'ventest_fn.js?_='+(new Date()).getTime();
		var head = document.getElementsByTagName('head')[0];
		head.appendChild(venraas_script2);
	</script>
		
</head>

<body>
    <div class="container-fluid">
        <div class="row-fluid">
            
            <!--/span-->
            <div class="col-md-12">
                <div class="jumbotron">
                    <h1><strong>VenRaas Weblog 測試網頁</strong></h1>

                    <p>請選擇您要執行測試的頁面</p>
                </div>
                <div class="col-md-12">
                <div class="well sidebar-nav">
                    <ul class="nav nav-tabs">
                        <li>
                            <a href="#" onclick="clickToHref('main.html')">首頁Page</a>
                        </li>
                        <li>
                            <a href="#" onclick="clickToHref('cartload.html')">購物車Page</a>
                        </li>
						<li>
                            <a href="#" onclick="clickToHref('checkout.html')">結帳Page</a>
                        </li>
                        <li class="active">
                            <a href="#" onclick="clickToHref('product-1.html')">Product-1 Page</a>
                        </li>
						<li>
                            <a href="#" onclick="clickToHref('category-1.html')">Category-1 Page</a>
                        </li>
                    </ul>
                </div>
				<div class="row-fluid">
					<input id='checkVenraas' type='button' value='check Venraas'>
					<button class="btn btn-default btn-xs" type="button" onclick="javascript:get_cookies();">Get cookies</button>
					<button class="btn btn-default btn-xs" type="button" onclick="javascript:remove_value();">remove</button>
                </div>
                <div class="row-fluid">
					<!--載入頁面的div-->
                    <div class="col-md-4">
						<h2>輸入載入頁面log參數值</h2>
						<span class="col-md-12">
                        <div class="input-group">
                          <span class="input-group-addon">uid:</span>
                          <input type="text" class="form-control" id="uid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_session:</span>
                          <input type="text" class="form-control" id="cc_session" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_guid:</span>
                          <input type="text" class="form-control" id="cc_guid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">categ_le:</span>
                          <input type="text" class="form-control" id="categ_le" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">categ_code:</span>
                          <input type="text" class="form-control" id="categ_code" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">gid:</span>
                          <input type="text" class="form-control" id="gid" placeholder="">
                        </div>
						<div class="input-group">
                          <span class="input-group-addon">from_rec:</span>
                          <input type="text" class="form-control" id="from_rec" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">page_type:</span>
                          <input type="text" class="form-control" id="page_type" value="gop">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">device:</span>
                          <input type="text" class="form-control" id="device" value="pc">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">web:</span>
                          <input type="text" class="form-control" id="web" value="web">
                        </div>
						</span>
						<div class="col-md-4">
							<button id ="send_log" class="btn btn-primary" type="button"  align="left">確定</button>
						</div>
					</div>
                    <!--加入購物車的div-->
					
					<div class="col-md-4">
						<h2>加入購物車</h2>
						<span class="col-md-12">
                        <div class="input-group">
                          <span class="input-group-addon">uid:</span>
                          <input type="text" class="form-control" id="cart_uid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_session:</span>
                          <input type="text" class="form-control" id="cart_cc_session" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_guid:</span>
                          <input type="text" class="form-control" id="cart_cc_guid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">gid:</span>
                          <input type="text" class="form-control" id="cart_gid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">sub_gid:</span>
                          <input type="text" class="form-control" id="cart_sub_gid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">from_rec</span>
                          <input type="text" class="form-control" id="cart_from_rec" placeholder="">
                        </div>
						</span>
						<div class="col-md-4">
							<button class="btn btn-primary" type="button" id="add_cart" align="left">確定</button>
						</div>
					</div>
					<!--加入追蹤清單的div-->
					
					<div class="col-md-4">
						<h2>加入追蹤清單</h2>
						<span class="col-md-12">
                        <div class="input-group">
                          <span class="input-group-addon">uid:</span>
                          <input type="text" class="form-control" id="wish_uid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_session:</span>
                          <input type="text" class="form-control" id="wish_cc_session" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">cc_guid:</span>
                          <input type="text" class="form-control" id="wish_cc_guid" placeholder="">
                        </div>
						<div class="input-group">
                          <span class="input-group-addon">categ_code:</span>
                          <input type="text" class="form-control" id="wish_categ_code" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">gid:</span>
                          <input type="text" class="form-control" id="wish_gid" placeholder="">
                        </div>
                        <div class="input-group">
                          <span class="input-group-addon">from_rec</span>
                          <input type="text" class="form-control" id="wish_from_rec" placeholder="">
                        </div>
						</span>
						<div class="col-md-4">
							<button class="btn btn-primary" type="button" id="add_wish" align="left">確定</button>
						</div>
					</div>
                                  
					</div> 
				</div>
            </div>
        </div>
        <!--/row-->
        <hr>
        <footer>
            <p>©ITRI 2016</p>
        </footer>
    </div>
	
	<!--venraas tracking script-->
	
	
	<script>
	// initial venraas 
	
	</script>
	
	<script>
	// for venraas pageload
	function send_log(){
		function myVenraasLogs(){
			try{
				if($("input#categ_code").val()==""){
					alert("請填入categ_code");
					throw "請填入categ_code";
				}
				if($("input#gid").val()==""){
					alert("請填入gid");
					throw "請填入gid";
				}
				//Require initial your domain name
				venraas.init({'domainName':'.venraas.tw','token':'rMUyBRrrpL'});
				
				//callback, DO TRACKING LOG HERE
				venraas.tracking('pageload|create', {
					'autosend' : false,             //(是否自動送出資料)
					'uid' : $("input#uid").val(),                //Require    //(加密的user id)
					'cc_session' : $("input#cc_session").val(),  //Require    //暫定從他們給的cooke name來...我先用null處理
					'cc_guid' : $("input#cc_guid").val(),        //Require    //暫定從他們給的cooke name來...我先用null處理
					'categ_le' : $("input#categ_le").val(),      //Optional   //(目錄階層類別:首頁1 大目錄2 中目錄3 小目錄4 其他null)
					'categ_code' : $("input#categ_code").val(),  //Require    //(cid)
					'gid' : $("input#gid").val(),                //Require    //(pid)
					'from_rec' : null,      //Require    //商品頁才會有目錄頁都先帶null
					'page_type' : 'gop',    //Optional   //(頁面類型)(有提供參數表)
					'device' : $("input#device").val(),          //Optional   //(使用載具類型)(有提供參數表) 暫時固定指定大網
					'web' : $("input#web").val()                    //Optional   //(web都帶null)
				});

				//最後記得送出log
				venraas.tracking('pageload|send');
				console.log("Debug in myVenraasLogs() done");
			}catch(e){console.log("Debug in myVenraasLogs() Exception:" +e+", Do Nothing~");}
		};

	try{
		var venraas_dt= Math.floor((new Date()).getTime()/86400000);
		var venraas_script = document.createElement('script');
		venraas_script.type = 'text/javascript';
		venraas_script.src = 'https://libs-alt.venraas.tw/js/venraaspt.min.js?_='+venraas_dt;
		venraas_script.async = true;

		// Handle Script loading
		var venraas_script_done = false;
		venraas_script.onload = venraas_script.onreadystatechange = function() {
		if(typeof this.readyState !== 'undefined')
			console.log('debug in onreadystatechange():' + this.readyState);
		if ( !venraas_script_done && (this.readyState === "loaded" || this.readyState === "complete" || !this.readyState) ) {
				venraas_script_done = true;
				console.log('debug in onreadystatechange() is on ready loaded status');
				myVenraasLogs();
				venraas_script.onload = venraas_script.onreadystatechange = null;
			}
		};

		var head = document.getElementsByTagName('head')[0];
		if(head){  
			head.appendChild(venraas_script);
			console.log("Debug in head append the script: venraaspt.min.js");
		}
	}
	catch(e){ console.log("Debug in creatVenraasScript_fn() Exception:" +e+", Do Nothing~"); }
	};

	//fot venraas 加入購物車的方法
	function forVenraasAddCart_fn() {
		console.log('click start forVenraasAddCart_fn()');
		try{
			if($("input#gid").val()==""){
				alert("請填入gid");
				throw "請填入gid";
			}
			if($("input#from_rec").val()==""){
				alert("請填入from_rec");
				throw "請填入from_rec";
			}
			
			if(typeof venraas != 'undefined'){
				venraas.tracking('cartadd|create',{
					'uid': $('input#cart_uid').val(),          //Require if user login
					'cc_session': $('input#cart_cc_session').val(),  //Optional
					'cc_guid': $('input#cart_cc_guid').val(),        //Optional
					'gid': $('input#cart_gid').val(),          //Require  (主商品)
					'sub_gid':$('input#sub_gid').val(),         //Optional (組合商品)
					'from_rec':$('input#cart_from_rec').val()        //Requir
				});
			} else {
				console.log("Debug in forVenraasAddCart_fn(): venraas is undefined, Do Nothing~");
			}

		}catch(e){ console.log("Debug in forVenraasAddCart_fn() catch Exception"); console.log( e); }

		console.log('forVenraasAddCart_fn() Done');
		
	};

	//fot venraas 加入追蹤清單的方法
	function forVenraasAddWishList_fn() {
		console.log('click start forVenraasAddWishList_fn()');
		try{
			if(typeof venraas != 'undefined'){
				venraas.tracking('favadd|create',{
					'uid': $('input#wish_uid').val(),
					'cc_session': $('input#wish_cc_session').val(),
					'cc_guid': $('input#wish_cc_guid').val(),
					'categ_code': $('input#wish_categ_code').val(),
					'gid': $('input#wish_gid').val(),
					'from_rec':$('input#wish_from_rec').val()
				});
			} else {
				console.log("Debug in forVenraasAddWishList_fn(): venraas is undefined, Do Nothing~");
			}

		}catch(e){ console.log("Debug in forVenraasAddWishList_fn() catch Exception"); console.log( e); }
		
		console.log('forVenraasAddWishList_fn() Done');
	};

	$(function(){
		// pageload
		$("#send_log").click(function(){ //當按鍵 id=send_log 的標籤被點擊的時候
			send_log();					//執行send_log()
			set_cookies();
		});
		
		//立刻買按鈕
		$("#add_cart").click(function(){
			forVenraasAddCart_fn();
			set_cookies();
		});
		
		//加入追蹤清單按鈕
		$("#add_wish").click(function() {
			forVenraasAddWishList_fn();
			set_cookies();
		});
		
		$("#checkVenraas").click(function(){
			if(typeof venraas === 'undefined'){
				console.log('venraas object not exist!');
			} else {
				console.log('venraas object exist. The version now is v'+venstrob.v);
				
			}
		});
	});
	
	function set_cookies(){
		var customObject={};
		//1.載入page欄位
		customObject.uid=$("input#uid").val();
		customObject.cc_session=$("input#cc_session").val();
		customObject.cc_guid=$("input#cc_guid").val();
		customObject.categ_le=$("input#categ_le").val();
		customObject.categ_code=$("input#categ_code").val();
		customObject.gid=$("input#gid").val();
		customObject.from_rec=$("input#from_rec").val();
		customObject.page_type=$("input#page_type").val();
		customObject.device=$("input#device").val();
		customObject.web=$("input#web").val();
		//2.加入購物車
		customObject.cart_uid=$("input#cart_uid").val();
		customObject.cart_cc_session=$("input#cart_cc_session").val();
		customObject.cart_cc_guid=$("input#cart_cc_guid").val();
		customObject.cart_gid=$("input#cart_gid").val();
		customObject.cart_sub_gid=$("input#cart_sub_gid").val();
		customObject.cart_from_rec=$("input#cart_from_rec").val();
		
		//3.加入追蹤清單
		customObject.wish_uid=$("input#wish_uid").val();
		customObject.wish_cc_session=$("input#wish_cc_session").val();
		customObject.wish_cc_guid=$("input#wish_cc_guid").val();
		customObject.wish_categ_code=$("input#wish_categ_code").val();
		customObject.wish_gid=$("input#wish_gid").val();
		customObject.wish_from_rec=$("input#wish_from_rec").val();
		
		var jsonString = JSON.stringify(customObject);
		document.cookie="product-1_cookie="+jsonString+";path=/";
			
		//alert(document.cookie);	
	};
	
	function getCookieByName(name) {
		var value = "; " + document.cookie;
		var parts = value.split("; " + name + "=");
		if (parts.length == 2) return parts.pop().split(";").shift();
	}
	
	function get_cookies(){
		if(document.cookie.length != 0){
			//alert(document.cookie);
			var cookie_json = JSON.parse(getCookieByName("product-1_cookie")); // JSON.parse()將json字串轉成json物件
			$("input#uid").val(cookie_json["uid"]);
			$("input#cc_session").val(cookie_json["cc_session"]);
			$("input#cc_guid").val(cookie_json["cc_guid"]);
			$("input#categ_le").val(cookie_json["categ_le"]);
			$("input#categ_code").val(cookie_json["categ_code"]);
			$("input#gid").val(cookie_json["gid"]);
			$("input#from_rec").val(cookie_json["from_rec"]);
			$("input#page_type").val(cookie_json["page_type"]);			
			$("input#device").val(cookie_json["device"]);
			$("input#web").val(cookie_json["web"]);
			
			$("input#cart_uid").val(cookie_json["cart_uid"]);
			$("input#cart_cc_session").val(cookie_json["cart_cc_session"]);
			$("input#cart_cc_guid").val(cookie_json["cart_cc_guid"]);
			$("input#cart_gid").val(cookie_json["cart_gid"]);
			$("input#cart_sub_gid").val(cookie_json["cart_sub_gid"]);
			$("input#cart_from_rec").val(cookie_json["cart_from_rec"]);
			
			$("input#wish_uid").val(cookie_json["wish_uid"]);
			$("input#wish_cc_session").val(cookie_json["wish_cc_session"]);
			$("input#wish_cc_guid").val(cookie_json["wish_cc_guid"]);
			$("input#wish_categ_code").val(cookie_json["wish_categ_code"]);
			$("input#wish_gid").val(cookie_json["wish_gid"]);
			$("input#wish_from_rec").val(cookie_json["wish_from_rec"]);						
		}	
	};
	
	function remove_value(){
		$("input#uid").val("");
		$("input#cc_session").val("");
		$("input#cc_guid").val("");
		$("input#categ_le").val("");
		$("input#categ_code").val("");
		$("input#gid").val("");
		$("input#from_rec").val("");
		$("input#page_type").val("");			
		$("input#device").val("");
		$("input#web").val("");
		
		$("input#cart_uid").val("");
		$("input#cart_cc_session").val("");
		$("input#cart_cc_guid").val("");
		$("input#cart_gid").val("");
		$("input#cart_sub_gid").val("");
		$("input#cart_from_rec").val("");
		
		$("input#wish_uid").val("");
		$("input#wish_cc_session").val("");
		$("input#wish_cc_guid").val("");
		$("input#wish_categ_code").val("");
		$("input#wish_gid").val("");
		$("input#wish_from_rec").val("");
	};

	</script>	
	
</body>

</html>